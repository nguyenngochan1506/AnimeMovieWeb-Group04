<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>forgotPassword</title>
  <link rel="stylesheet" href="./css/forgot.css" />
  <link rel="stylesheet" href="./bootstrap-5.3.2-dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="./css/contact.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body class="body-bg">

  <!-- Phần nav -->
  <header class="container-fluid p-3 text-bg-dark position-fixed z-3" id="header-include">
  </header>

  <!-- Phần form forgotPassword -->
  <section class="container-forgot">
    <form action="" class="form-forgot">

      <!-- Trường nhập email -->
      <div class="mb-3">
        <label for="email" class="form-label">Email:</label>
        <input style="width: 500px;" type="email" class="form-control" id="email" name="email"
          placeholder="Nhập địa chỉ email">
      </div>

      <!-- Trường nhập mã xác minh -->
      <div class="mb-3">
        <label for="verificationCode" class="form-label">Mã xác minh:</label>
        <div class="input-group mb-3 pl-1">
          <div style="width: 81px; color: #fff; background-color: #1E293B; " class="input-group-prepend">
            <span style="color: #fff; background-color: #1E293B; " class="input-group-text" id="verificationCodePrefix"
              onclick="generateVerificationCode()"></span>
          </div>
          <input style="width: 421px;" type="text" class="form-control" placeholder="Mã xác minh" aria-label="Username"
            aria-describedby="basic-addon1" id="verificationCodeInput" oninput="validateVerificationCode()">
        </div>
      </div>

      <!-- Nút gửi form -->
      <div class="mb-3 ">
        <button type="submit" class="btn btn-danger" id="submitButton" disabled onclick="submitForm()">Lấy lại mật
          khẩu</button>
      </div>

      <script>
        let generatedCode = '';

        function generateRandomCode(length) {
          const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
          let randomCode = '';
          for (let i = 0; i < length; i++) {
            const randomIndex = Math.floor(Math.random() * characters.length);
            randomCode += characters.charAt(randomIndex);
          }
          return randomCode;
        }

        function generateVerificationCode() {
          const verificationCodePrefix = document.getElementById('verificationCodePrefix');
          const verificationCodeInput = document.getElementById('verificationCodeInput');

          generatedCode = generateRandomCode(5); // 5 là chiều dài của mã xác minh
          verificationCodeInput.value = ''; // Reset giá trị trường nhập mã xác minh

          // Hiển thị mã xác minh trong thẻ span
          verificationCodePrefix.textContent = generatedCode;

          // Enable nút khi mã xác minh được tạo mới
          document.getElementById('submitButton').removeAttribute('disabled');
        }

        function validateVerificationCode() {
          const inputCode = document.getElementById('verificationCodeInput').value;
          // Disable nút nếu mã xác minh không khớp
          document.getElementById('submitButton').disabled = (inputCode !== generatedCode);
        }

        function submitForm() {
          // Thực hiện các thao tác khi nhấn nút "Lấy lại mật khẩu"
          // (Thêm logic xử lý lấy lại mật khẩu ở đây nếu cần)
        }

        // Gọi hàm tạo mã xác minh ngay khi trang load
        generateVerificationCode();
      </script>
  </section>


  <!-- Phần footer -->
  <div class="container-fluid" id="footer-include">
  </div>

  <script>
    //phần include header and footer
    const header = document.querySelector('#header-include');
    const footer = document.querySelector('#footer-include');
    fetch('./component/nav.html').then(response => response.text()).then(html => header.innerHTML = html)
    fetch('./component/footer.html').then(response => response.text()).then(html => footer.innerHTML = html)
  </script>
  <script type="module" src="./js/forgot-password.js"></script>
  <script src="./js/contact.js"></script>
</body>

</html>